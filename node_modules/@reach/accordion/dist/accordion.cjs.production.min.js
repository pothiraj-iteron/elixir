"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@reach/utils"),n=require("@reach/descendants"),r=require("@reach/auto-id");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("prop-types");var a=o(e);function d(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}var c,i=n.createDescendantContext("AccordionDescendantContext"),s=t.createNamedContext("AccordionContext",{}),u=t.createNamedContext("AccordionItemContext",{});(c=exports.AccordionStates||(exports.AccordionStates={})).Open="OPEN",c.Collapsed="COLLAPSED";var l=e.forwardRef((function(o,c){var u=o.children,l=o.defaultIndex,f=o.index,p=o.onChange,x=o.readOnly,v=void 0!==x&&x,b=o.collapsible,A=void 0!==b&&b,h=o.multiple,m=void 0!==h&&h,I=d(o,["children","defaultIndex","index","onChange","readOnly","collapsible","multiple"]),C=e.useRef(void 0!==f).current,y=n.useDescendantsInit(),O=y[0],D=y[1],P=r.useId(I.id),S=e.useState((function(){switch(!0){case C:return f;case null!=l:return m?Array.isArray(l)?l:[l]:Array.isArray(l)?null!==(e=l[0])&&void 0!==e?e:0:l;var e;case A:return m?[]:-1;default:return m?[0]:0}})),w=S[0],E=S[1],k=e.useCallback((function(e){p&&p(e),C||E((function(t){return e=e,m?(t=t).includes(e)?t.length>1||A?t.filter((function(t){return t!==e})):t:[].concat(t,[e]).sort():(t=t)===e&&A?-1:e}))}),[A,C,m,p]),g=e.useMemo((function(){return{accordionId:P,openPanels:C?f:w,onSelectPanel:v?t.noop:k,readOnly:v}}),[w,f,P,C,k,v]);return e.useEffect((function(){return t.checkStyles("accordion")}),[]),a.default.createElement(n.DescendantProvider,{context:i,items:O,set:D},a.default.createElement(s.Provider,{value:g},a.default.createElement("div",Object.assign({},I,{ref:c,"data-reach-accordion":""}),u)))})),f=t.forwardRefWithAs((function(r,o){var c=r.as,l=void 0===c?"div":c,f=r.children,p=r.disabled,x=void 0!==p&&p,b=d(r,["as","children","disabled"]),A=e.useContext(s),h=A.accordionId,m=A.openPanels,I=A.readOnly,C=e.useRef(null),y=n.useDescendant({element:C.current,disabled:x},i),O=t.makeId(h,y),D=t.makeId("panel",O),P=t.makeId("button",O),S=(Array.isArray(m)?m.includes(y)&&exports.AccordionStates.Open:m===y&&exports.AccordionStates.Open)||exports.AccordionStates.Collapsed;return a.default.createElement(u.Provider,{value:{disabled:x,buttonId:P,index:y,itemId:O,buttonRef:C,panelId:D,state:S}},a.default.createElement(l,Object.assign({},b,{ref:o,"data-reach-accordion-item":"","data-state":v(S),"data-disabled":x?"":void 0,"data-read-only":I?"":void 0}),f))})),p=t.forwardRefWithAs((function(r,o){var c=r.as,l=void 0===c?"button":c,f=r.children,p=r.onClick,x=r.onKeyDown,v=r.tabIndex,b=d(r,["as","children","onClick","onKeyDown","onMouseDown","onPointerDown","tabIndex"]),A=e.useContext(s).onSelectPanel,h=e.useContext(u),m=h.disabled,I=h.buttonId,C=h.buttonRef,y=h.index,O=h.panelId,D=h.state,P=t.useForkedRef(o,C),S=n.useDescendantKeyDown(i,{currentIndex:y,orientation:"vertical",key:"element",rotate:!0,callback:function(e){e&&e.focus()},filter:function(e){return!e.disabled}});return a.default.createElement(l,Object.assign({"aria-controls":O,"aria-expanded":D===exports.AccordionStates.Open,tabIndex:m?-1:v},b,{ref:P,"data-reach-accordion-button":"",disabled:m||void 0,id:I,onClick:t.wrapEvent(p,(function(e){e.preventDefault(),m||(C.current.focus(),A(y))})),onKeyDown:t.wrapEvent(x,S)}),f)})),x=t.forwardRefWithAs((function(t,n){var r=t.as,o=void 0===r?"div":r,c=t.children,i=d(t,["as","children"]),s=e.useContext(u),l=s.panelId,f=s.state;return a.default.createElement(o,Object.assign({hidden:f!==exports.AccordionStates.Open,role:"region","aria-labelledby":s.buttonId},i,{ref:n,"data-reach-accordion-panel":"","data-disabled":s.disabled||void 0,"data-state":v(f),id:l,tabIndex:-1}),c)}));function v(e){return e===exports.AccordionStates.Open?"open":"collapsed"}exports.Accordion=l,exports.AccordionButton=p,exports.AccordionItem=f,exports.AccordionPanel=x,exports.useAccordionContext=function(){var t=e.useContext(s),n=t.openPanels,r=t.accordionId;return e.useMemo((function(){return{id:r,openPanels:[].concat(n).filter((function(e){return e<0}))}}),[r,n])},exports.useAccordionItemContext=function(){var t=e.useContext(u),n=t.index,r=t.state;return e.useMemo((function(){return{index:n,isExpanded:r===exports.AccordionStates.Open}}),[n,r])};
//# sourceMappingURL=accordion.cjs.production.min.js.map
